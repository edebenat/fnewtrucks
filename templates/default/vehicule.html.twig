{% extends 'base.html.twig' %}

{% block title %}F New Trucks - Nos véhicules en stock{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href={{asset("bundles/slick/slick.css")}}>
    <link rel="stylesheet" href={{asset("bundles/slick/slick-theme.css")}}>
{% endblock %}

{% block javascripts %}
    <script src={{ asset('bundles/slick/slick.min.js') }}></script>
{% endblock %}

{% block body %}
<section class="vehicleOne">
    <div class="vehicleOneImages">
        {% for key, image in vehicle.images %}
            <div class="vehicleOneImage" onclick="openGallery({{key}})">
                <img src={{ asset(image) }} alt="{{ vehicle.model }}">
            </div>
        {% endfor %}
    </div>
    <div class="vehicleOneDetails">
        <div class="vehicleOneTitle">
            <h1>{{ vehicle.model }}</h1>
            <p>{{ vehicle.type }}</p>
        </div>
        <div class="vehicleOneCaracts">
            <hr>
            <div class="row">
                <div>{{ vehicle.state }}</div>
                <div>{{ vehicle.enginePower }}</div>
                <div>{{ vehicle.gears }}</div>
            </div>
            <hr>
            <div class="row">
                {% if vehicle.mileageFromOdometer is not null %}
                    <div>{{ vehicle.mileageFromOdometer }}</div>                                    
                {% endif %}
                <div>{{ vehicle.carac1 }}</div>
                <div>{{ vehicle.carac2 }}</div>
                {% if vehicle.mileageFromOdometer is null %}
                    <div>{{ vehicle.carac3 }}</div>                                    
                {% endif %}
            </div>
            <hr>
        </div>
        <div class="vehicleOneEquipments">
            <div class="bold">Equipements :</div>
            <div class="light">{{ vehicle.equipments | raw }}</div>
        </div>
        <div class="btn btnOrange" onclick="openForm({{vehicle.id}})"><span>Je suis intéressé</span><img src={{ asset('images/orange-arrow.png') }}></div>
    </div>
</section>
<section id="fnt-contact" class="fnt-contact">
    <div class="fnt-departements">
        <div class="fnt-col1">
            <h3>Départements 17, 79, 86</h3>
            <div class="fnt-av-commerce">
                <div class="fnt-av">
                    <h4>Après-vente</h4>
                    <h5>F NEW TRUCKS 79</h5>
                    <p>
                        Garage Jaulin<br>
                        11 avenue Charles de Gaulle<br>
                        79400 Saint-Maixent-l’École<br>
                        <a href="tel:+33549056504">05 49 05 65 04</a>
                    </p>
                    <img src={{asset("images/logo-jaulin.png")}} alt="Garage Jaulin" class="fnt-logo">
                </div>
                <div class="fnt-commerce">
                    <h4>Commerce</h4>
                    <h5>Boris VADELEAU</h5>
                    <p>
                        <a href="mailto:b.vadeleau@fnewtrucks.fr">b.vadeleau@fnewtrucks.fr</a>
                        <br>
                        <a href="tel:+33616334331">06 16 33 43 31</a>
                    </p>
                </div>
            </div>
        </div>
        <div class="fnt-col2">
            <h3>Départements 16, 19, 23, 24, 87</h3>
            <div class="fnt-av-commerce">
                <div class="fnt-av">
                    <h4>Après-vente</h4>
                    <h5>F NEW TRUCKS 87</h5>
                    <p>
                        Garage C.E.A.P.L.<br>
                        10-12 route du Verdoyer<br>
                        87430 Verneuil-sur-Vienne<br>
                        <a href="tel:+33555480483">05 55 48 04 83</a>
                    </p>
                </div>
                <div class="fnt-commerce">
                    <h4>Commerce</h4>
                    <h5>Thomas TROUSSARD</h5>
                    <p>
                        <a href="mailto:t.troussard@fnewtrucks.fr">t.troussard@fnewtrucks.fr</a>
                        <br>
                        <a href="tel:+33679813600">06 79 81 36 00</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
<div id="vehicleGallery">
    <div class="slick">
        {% for image in vehicle.images %}
            <img src={{ asset(image) }}>
        {% endfor %}
    </div>
</div>
<div class="vehiclesForm" id="vehiclesForm">
    {{ form_start(form, {'attr': {'id': 'contactForm'}}) }}
        <h2>Nous contacter</h2>
        {{ form_row(form.firstname) }}
        {{ form_row(form.lastname) }}
        {{ form_row(form.email) }}
        {{ form_row(form.tel) }}
        <div id="contact_submit">
            <div class="btn btnOrange" onclick="submitForm();"><span>Envoyer</span><img src={{ asset('images/orange-arrow.png') }}></div>
        </div>
        <div id="contact_cancel">
            <div class="btn btnTransparent"><span>Annuler</span><img src={{ asset('images/orange-arrow.png') }}></div>
        </div>
        <div id="vehiclesFormError">Vous devez remplir tous les champs</div>
    {{ form_end(form) }}
</div>
<script>
    $(document).ready(function(){
        $('.slick').slick({
            dots: true
        });
    });
</script>
<script>
    function openGallery(key){
        $('.slick').slick('slickGoTo', key);
        $('#vehicleGallery').addClass('show');
    }
    $('#vehicleGallery').click(function(){
        $('#vehicleGallery').removeClass('show');
    }).children().click(function(e){
        return false;
    });

    function closeImg(div){
        div.removeClass('show');
    }
    function openImg(id, key){
        div = '#img' + id + '-' + key;
        $(div).addClass('show');
    }
    function openForm(id){
        $('#contact_vehicle').val(id);
        $('#vehiclesForm').addClass('show');
    }
    $('#vehiclesForm').click(function(){
        clearForm();
    }).children().click(function(e){
        return false;
    });
    $('#contact_cancel').click(function(){
        clearForm();
    });
    function clearForm(){
        $('#vehiclesForm').removeClass('show');
        $('#vehiclesForm input').val('');
    }
    function submitForm(){
        if ($('#contact_firstname').val() != '' && $('#contact_lastname').val() != '' && $('#contact_email').val() != '' && $('#contact_tel').val() != ''){
            $('#contactForm').submit();
        }
        else{
            $('#vehiclesFormError').addClass('show');
            setTimeout(function(){
                $('#vehiclesFormError').removeClass('show');
            }, 3000);
        }
    }
</script>

{% endblock %}
